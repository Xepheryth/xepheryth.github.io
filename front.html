<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KANS - Monitoring Pengiriman Barang</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
      <header>
        <div class="header-content">
          <img src="media/logo KANS.png" alt="KANS logo" class="logo" style="height: 45px; vertical-align: left;">
          <nav class="navbar">
            <ul class="nav-menu">
              <li><a href="#" class="nav-link" data-page="home">Beranda</a></li>
              <li><a href="#" class="nav-link" data-page="shipments">Daftar Project</a></li>
              <li><a href="#" class="nav-link" data-page="profile" id="profile-link" style="display:none;">Profile</a></li>
            </ul>
            <div class="search-box">
              <input type="text" id="search-input" placeholder=" " class="search-input">
              <button id="search-btn" class="search-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
              </button>
            </div>
          </nav>
          <div class="header-actions">
            
            <div id="user-badge" class="user-badge" style="display:none;"></div>
          </div>
        </div>
      </header>
     <div class="content">
      <!-- Halaman Beranda -->
      <div id="home" class="page active">
        <main class="page-content">
          <!-- Hero Section -->
          <section class="hero-section">
            <div class="hero-wrapper">
              <div class="hero-content">
                <h1 class="hero-title">MOPRANG</h1>
                <p class="hero-subtitle">Sistem Terpadu Monitoring Pengiriman Barang</p>
                <p class="hero-description">Pantau pengiriman barang dari supplier ke client dengan mudah dan real-time. Kelola project dan area dengan efisien.</p>
                <div class="hero-buttons">
                  <button class="btn-hero btn-primary" onclick="document.querySelector('.nav-link[data-page=shipments]').click();">
                    Mulai Sekarang
                  </button>
                </div>
              </div>
              <div class="hero-illustration">
                <img src="media/truk.png" alt="Truck illustration" style="width: 100%; height: auto; max-width: 400px;"/>
              </div>
            </div>
          </section>

          <!-- Features Section -->
          <section class="features-section">
            <h2 class="section-title">Fitur Unggulan</h2>
            <div class="features-grid">
              <div class="feature-card">
                <div class="feature-icon">üì¶</div>
                <h3>Manajemen Project</h3>
                <p>Kelola multiple project dengan periode berbeda. Lacak progress setiap project secara real-time.</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üó∫Ô∏è</div>
                <h3>Organisasi Area</h3>
                <p>Bagi project menjadi beberapa area untuk pengorganisasian yang lebih baik dan tracking detail.</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3>Progress Tracking</h3>
                <p>Pantau progress pengiriman dengan visualisasi bar chart yang mudah dipahami.</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üë§</div>
                <h3>Profile Management</h3>
                <p>Kelola profil user dengan foto dan informasi lengkap. Sistem autentikasi yang aman.</p>
              </div>
            </div>
          </section>

          <!-- Stats Section -->
          <section class="stats-section">
            <h2 class="section-title">Statistik Project</h2>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-number" id="total-projects">0</div>
                <p class="stat-label">Total Project</p>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="total-areas">0</div>
                <p class="stat-label">Total Area</p>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="total-items">0</div>
                <p class="stat-label">Total Item</p>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="avg-progress">0%</div>
                <p class="stat-label">Rata-rata Progress</p>
              </div>
            </div>
          </section>

          <!-- Info Section -->
          <section class="info-section">
            <h2 class="section-title">Tentang MOPRANG</h2>
            <div class="info-content">
              <p>MOPRANG adalah aplikasi monitoring pengiriman barang yang dirancang untuk memudahkan tracking barang dari supplier ke client. Dengan interface yang user-friendly dan fitur tracking real-time, Anda dapat mengelola pengiriman dengan lebih efisien.</p>
              <div class="info-features">
                <div class="info-item">
                  <strong>‚úì Mudah Digunakan</strong>
                  <p>Interface intuitif yang tidak memerlukan training khusus</p>
                </div>
                <div class="info-item">
                  <strong>‚úì Real-time Updates</strong>
                  <p>Data progress pengiriman diupdate secara instant</p>
                </div>
                <div class="info-item">
                  <strong>‚úì Aman & Terpercaya</strong>
                  <p>Sistem autentikasi dan enkripsi data yang aman</p>
                </div>
              </div>
            </div>
          </section>

          <!-- CTA Section -->
          <section class="cta-section">
            <h2>Siap untuk Memulai?</h2>
            <p>Kelola pengiriman barang Anda dengan lebih efisien menggunakan MOPRANG</p>
            <button class="btn-cta btn-primary" onclick="document.querySelector('.nav-link[data-page=shipments]').click();">
              Lihat Daftar Project
            </button>
          </section>
        </main>
      </div>

      <!-- Halaman Daftar Project -->
      <div id="shipments" class="page">
        <main class="page-content">
            <section id="shipments-section">
                <h2>Daftar Project :</h2>
                <div id="projects-container" class="projects-container">
                  <!-- Project cards akan diisi oleh JavaScript -->
                </div>
                <button id="add-project-btn" class="btn-add-project" title="Tambah Project Baru">+</button>
            </section>
        </main>
      </div>

          <!-- Halaman Daftar Area -->
          <div id="areas" class="page">
            <main class="page-content">
              <section id="areas-section">
                <h2>Daftar Area :</h2>
                <div style="display:flex; align-items:center; gap:12px; margin-bottom:12px;">
                  <label for="project-select-area">Pilih Project:</label>
                  <select id="project-select-area" style="min-width:220px;"></select>
                  <button id="add-area-btn" class="btn-primary" title="Tambah Area">+ Tambah Area</button>
                </div>
                <div id="areas-container" class="areas-container">
                  <!-- Area cards akan diisi oleh JavaScript -->
                </div>
              </section>
            </main>
          </div>

      <!-- Modal Tambah Project Floating Window -->
      <div id="add-project-modal" class="modal-overlay" aria-hidden="true" style="display:none;">
        <div class="modal-floating" role="dialog" aria-modal="true" aria-labelledby="add-project-title">
          <h3 id="add-project-title">Tambah Project Baru</h3>
          <form id="add-project-form">
            <div class="form-row">
              <input type="text" id="project-name" placeholder="Nama Project" required>
            </div>
            <div class="form-row">
              <input type="text" id="project-period" placeholder="Periode" required>
            </div>
            <div class="modal-actions">
              <button type="button" class="btn cancel" id="add-project-cancel">Batal</button>
              <button type="submit" class="btn primary">Tambah Project</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal Tambah Area Floating Window -->
      <div id="add-area-modal" class="modal-overlay" aria-hidden="true" style="display:none;">
        <div class="modal-floating" role="dialog" aria-modal="true" aria-labelledby="add-area-title">
          <h3 id="add-area-title">Tambah Area Baru</h3>
          <form id="add-area-form">
            <div class="form-row">
              <input type="text" id="area-name" placeholder="Nama Area" required>
            </div>
            <div class="modal-actions">
              <button type="button" class="btn cancel" id="add-area-cancel">Batal</button>
              <button type="submit" class="btn primary">Tambah Area</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Halaman Profile -->
      <div id="profile" class="page">
        <main class="page-content">
            <section id="profile-section">
                <h2>Profile Saya</h2>
                <div id="profile-info" class="profile-card" style="display:none;">
                    <div class="profile-photo-section" style="text-align: center; margin-bottom: 20px;">
                        <img id="profile-photo" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 24 24' fill='%23ccc'%3E%3Ccircle cx='12' cy='8' r='4'/%3E%3Cpath d='M12 14c-6 0-8 3-8 5v3h16v-3c0-2-2-5-8-5z'/%3E%3C/svg%3E" alt="Profile Photo" style="width: 120px; height: 120px; border-radius: 50%; border: 3px solid #FFD700; object-fit: cover;">
                        <div style="margin-top: 15px;">
                            <label for="profile-photo-input" style="display: inline-block; padding: 8px 16px; background: #FFD700; color: #000; border-radius: 5px; cursor: pointer; font-weight: bold;">
                                üì∑ Pilih Foto
                            </label>
                            <input type="file" id="profile-photo-input" style="display:none;" accept="image/*">
                        </div>
                        <p id="profile-photo-status" style="margin-top: 10px; font-size: 12px; color: #666;"></p>
                    </div>
                    <p><strong>Username:</strong> <span id="profile-username"></span></p>
                    <p><strong>Email:</strong> <span id="profile-email"></span></p>
                    <p id="profile-timestamp-row" style="display:none;"><strong>Logged in at:</strong> <span id="profile-timestamp"></span></p>
                    <button id="profile-refresh-btn" class="btn-primary">Refresh Profile</button>
                </div>
                <div id="profile-loading" style="display:none;">Memuat profile...</div>
                <div id="profile-error" style="display:none; color:#d32f2f;"></div>
            </section>
        </main>
      </div>
    </div>
    
     <footer>
        <div class="social-icons">
            <a href="#" class="social-link" data-social="facebook" aria-label="Facebook" title="Facebook" target="_blank" rel="noopener noreferrer">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 12C22 6.48 17.52 2 12 2S2 6.48 2 12c0 4.84 3.44 8.84 7.94 9.78v-6.92H7.9v-2.86h2.04V9.41c0-2.02 1.2-3.14 3.03-3.14.88 0 1.8.16 1.8.16v1.98h-1.02c-1.01 0-1.33.63-1.33 1.27v1.54h2.26l-.36 2.86h-1.9V21.8C18.56 20.84 22 16.84 22 12z"/>
                </svg>
            </a>
            <a href="#" class="social-link" data-social="email" aria-label="Email" title="Email" target="_blank" rel="noopener noreferrer">
                <!-- Email / mail icon -->
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
            </a>
            <a href="#" class="social-link" data-social="instagram" aria-label="Instagram" title="Instagram" target="_blank" rel="noopener noreferrer">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="18" height="18" rx="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8"></path>
                    <circle cx="17.5" cy="6.5" r="0.5" fill="currentColor"></circle>
                </svg>
            </a>
            <a href="#" class="social-link" data-social="whatsapp" aria-label="WhatsApp" title="WhatsApp" target="_blank" rel="noopener noreferrer">
                <!-- Clean WhatsApp icon (chat bubble + phone) -->
                <svg width="24" height="24" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M16 1C8.268 1 2 6.925 2 13.75 2 17.6 3.6 21.06 6.18 23.45L6 28l4.9-1.55C13.12 27.9 14.55 28 16 28 23.732 28 30 22.075 30 15.25 30 8.425 23.732 1 16 1zM21.6 20.2c-.4.11-2.5.5-3.2.56-.7.06-1.2.11-1.75-.34-.55-.45-2.05-1.78-2.65-2.41-.6-.63-1.05-1.08-.8-1.69.25-.61 1.02-1.02 1.6-1.5.6-.5.8-.83 1.2-1.18.4-.35.2-.76-.1-1.06-.3-.3-1.04-.9-1.5-1.3-.46-.4-.95-.35-1.4-.07-.45.28-1.6 1.16-1.6 2.83 0 1.67 1.48 3.74 1.7 4.01.22.27 2.7 4.3 6.17 5.55.86.32 1.44.47 1.93.38.49-.09 1.64-.67 1.87-1.33.23-.66.23-1.23.16-1.35-.07-.12-.47-.19-.87-.08z"/>
                </svg>
            </a>
        </div>
     </footer>
     <script>
       (function(){
         try{
           const cur = localStorage.getItem('kans_current') || localStorage.getItem('kans_token');
           if(!cur){
             // Jika tidak login, arahkan ke halaman login
             window.location.href = 'login.html';
           }
         }catch(e){ /* ignore */ }
       })();
     </script>
     <script src="script.js"></script>
    </div>  
</body>
</html>
